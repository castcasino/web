services:
  api:
    build: .
    image: api
    container_name: api
    restart: unless-stopped
    network_mode: 'host'
    # ports:
      # - '127.0.0.1:4000:3000'
    environment:
      - COUCHDB_USER=${COUCHDB_USER}
      - COUCHDB_PASSWORD=${COUCHDB_PASSWORD}
      - SMTP_HOST=${SMTP_HOST}
      - SMTP_USER=${SMTP_USER}
      - SMTP_PASS=${SMTP_PASS}
    logging: # apply better controls to Docker overlay folder
      driver: 'json-file'
      options:
        max-file: '5'
        max-size: '10m'
# networks:
#   myapp-network:
#     driver: bridge
